# Level

  - asset: tiled-map
    name: LeaksMap
    path: resources/leaks/leaks-level.tmx

  - asset: prefab
    name: LeaksLevel
    components:
      - type: OrthogonalTiledMapRendererComponent
        params:
          tiled-map: LeaksMap
          pixels-per-unit: 32
      - type: TiledMapSpawner
        params:
          tiled-map: LeaksMap
          pixels-per-unit: 32

  - asset: prefab
    name: BlockTilePrefab
    components:
      - type: Transform
      - type: PhysicsBody
        params:
          body-type: static
          velocity-x: 0
          velocity-y: 0
          fixtures:
            - shape: box
              width: 1
              height: 1
              density: 1
              friction: 0.7

# Player

  - asset: texture
    name: JanitorSprite
    path: leaks/janitor2.png

  - asset: texture
    name: JanitorArm
    path: leaks/arm.png

  - asset: texture
    name: JanitorSpriteSheet
    path: leaks/walking_jan.png

  - asset: animation
    name: PlayerWalking
    texture: JanitorSpriteSheet
    frame-size: [32, 32]
    frame-duration: 0.1
    frames:
      - [0, 0]
      - [1, 0]
      - [2, 0]
      - [3, 0]

  - asset: prefab
    name: MopHead
    components:
      - type: Transform
      - type: MopHead
        params:
          pop-sound: BlobPopSound
      - type: EventHub
      - type: AreaTrigger
        params:
          width: .1
          height: 0.8 

  - asset: prefab
    name: Arm
    children:
      - prefab: MopHead
        options:
          transform:
            position: [-0.3, 0]
    components:
      - type: Transform
      - type: SpriteRenderer
        params:
          texture: JanitorArm
          tile-size: [32, 32]
          tile-indices: [0, 0]

  - asset: prefab
    name: ArmRoot
    children:
      - prefab: Arm
        options:
          transform:
            position: [-0.5, 0]
    components:
      - type: Transform
      - type: EventHub
        params:
          tag: PlayerArmRoot

  - asset: prefab
    name: LeaksPlayer
    children:
      - prefab: ArmRoot
        options:
          transform:
            position: [0, 0]
            rotation: 0
    components:
      - type: Transform
      - type: Player
        params:
          jet-force: 10
      - type: PhysicsBody
        params:
          body-type: dynamic
          velocity-x: 0
          velocity-y: 0
          fixed-rotation: true
          fixtures:
            - shape: circle
              radius: 0.5
              density: 1
              friction: 0.7
      - type: SpriteRenderer
        params:
          texture: JanitorSprite
          tile-size: [32, 32]
          tile-indices: [0, 0]
      - type: AnimationController
        params:
          animation: PlayerWalking
          play-on-start: true

# 'Systems'
  - asset: prefab
    name: GravityGenerator
    components:
      - type: Transform
      - type: PhysicsBody
        params:
          body-type: static
          fixtures:
            - shape: circle
              radius: 0.5

# Leaks

  - asset: texture
    name: DropletSprite
    path: leaks/droplet.png

  - asset: texture
    name: RipSprite
    path: leaks/rip.png

  - asset: prefab
    name: Blob
    components:
      - type: Transform
      - type: PhysicsBody
        params:
          body-type: dynamic
          fixtures:
            - shape: circle
              radius: 0.25
      - type: SpriteRenderer
        params:
          texture: DropletSprite
          tile-size: [32, 32]
          tile-indices: [0, 0]

  - asset: prefab
    name: LeakEmitter
    components:
      - type: Transform
      - type: LeakEmitter
        params:
          emitted-prefab: Blob
          emit-interval: 2.0
      - type: SpriteRenderer
        params:
          texture: RipSprite
          tile-size: [32, 32]
          tile-indices: [0, 0]

# Audio

  - asset: sound
    name: BlobPopSound
    path: "resources/leaks/oildeath.wav"

  - asset: music
    name: LeaksMusic
    path: "resources/leaks/griddygrindy.mp3"

  - asset: prefab
    name: MusicPlayer
    components:
      - type: MusicPlayer
        params:
          audio-asset: LeaksMusic
          volume: 0.1
